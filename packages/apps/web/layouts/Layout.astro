---
export interface Props {
	title: string;
	description?: string;
	image?: string;
	url?: string;
	type?: 'website' | 'article';
	publishedTime?: string;
	modifiedTime?: string;
	tags?: string[];
}

const { 
	title, 
	description = "Prompt Craft - The most powerful AI prompt management system. Organize, test, and deploy prompts with TypeScript precision.",
	image = "/og-image.png",
	url = Astro.url.href,
	type = 'website',
	publishedTime,
	modifiedTime,
	tags = []
} = Astro.props;

// Safe URL construction with fallback
const baseUrl = Astro.site?.href || 'https://prompt-craft.vercel.app';
const canonicalUrl = new URL(Astro.url.pathname, baseUrl).href;
const imageUrl = new URL(image, baseUrl).href;
---

<!DOCTYPE html>
<html lang="en" class="h-full scroll-smooth">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		
		<!-- Primary Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />
		<meta name="author" content="Lukeus" />
		<meta name="robots" content="index, follow" />
		<link rel="canonical" href={canonicalUrl} />
		
		<!-- Keywords -->
		<meta name="keywords" content="AI, artificial intelligence, prompt management, prompt engineering, AI assistant, AI agent, TypeScript, MCP, Model Context Protocol, automation, productivity, lukeus" />
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content={type} />
		<meta property="og:url" content={url} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={imageUrl} />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="og:image:type" content="image/png" />
		<meta property="og:site_name" content="Prompt Craft" />
		<meta property="og:locale" content="en_US" />
		
		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:url" content={url} />
		<meta property="twitter:title" content={title} />
		<meta property="twitter:description" content={description} />
		<meta property="twitter:image" content={imageUrl} />
		<meta property="twitter:creator" content="@lukeus" />
		<meta property="twitter:site" content="@lukeus" />
		
		<!-- Article specific meta tags -->
		{type === 'article' && publishedTime && (
			<meta property="article:published_time" content={publishedTime} />
		)}
		{type === 'article' && modifiedTime && (
			<meta property="article:modified_time" content={modifiedTime} />
		)}
		{type === 'article' && (
			<meta property="article:author" content="Lukeus" />
			<meta property="article:section" content="Technology" />
		)}
		{tags.map(tag => (
			<meta property="article:tag" content={tag} />
		))}
		
		<!-- Favicon and Icons -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
		<link rel="manifest" href="/site.webmanifest" />
		<meta name="theme-color" content="#0ea5e9" />
		
		<!-- Preconnect for performance -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500;600&display=swap" rel="stylesheet">
		
		<!-- Structured Data -->
		<script type="application/ld+json">
			{
				"@context": "https://schema.org",
				"@type": "WebApplication",
				"name": "Prompt Craft",
				"description": "The most powerful AI prompt management system ever built. Organize, test, and deploy prompts with TypeScript precision.",
				"url": "https://prompt-craft.vercel.app",
				"applicationCategory": "ProductivityApplication",
				"operatingSystem": "Web Browser",
				"offers": {
					"@type": "Offer",
					"price": "0",
					"priceCurrency": "USD"
				},
				"creator": {
					"@type": "Person",
					"name": "Lukeus",
					"url": "https://lukeus.com",
					"sameAs": [
						"https://lukeus.app"
					]
				},
				"featureList": [
					"AI Prompt Management",
					"TypeScript Integration",
					"MCP Server Support",
					"Smart Categorization",
					"Real-time Testing",
					"Prompt Search and Organization"
				]
			}
		</script>
	</head>
	<body class="h-full bg-gradient-to-br from-dark-950 via-dark-900 to-dark-850 font-sans text-gray-100">
		<div class="min-h-full flex flex-col">
			<!-- Enhanced Navigation with Modern Styling -->
			<nav class="glass backdrop-blur-md border-0 border-b border-dark-700/30 shadow-xl">
				<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
					<div class="flex justify-between h-16">
						<div class="flex">
							<div class="flex-shrink-0 flex items-center group">
								<div class="flex items-center space-x-3">
									<div class="w-8 h-8 bg-gradient-to-br from-primary-500 to-accent-500 rounded-lg flex items-center justify-center shadow-md group-hover:shadow-lg transition-all duration-200">
										<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
										</svg>
									</div>
									<h1 class="text-xl font-bold bg-gradient-to-r from-gray-100 via-primary-300 to-accent-300 bg-clip-text text-transparent group-hover:scale-105 transition-transform duration-200">Prompt Craft</h1>
								</div>
							</div>
							<div class="hidden sm:ml-8 sm:flex sm:space-x-1">
								<a href="/" class="nav-link" data-active={Astro.url.pathname === '/'}>
									<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"></path>
									</svg>
									Dashboard
								</a>
								<a href="/prompts" class="nav-link" data-active={Astro.url.pathname.startsWith('/prompts')}>
									<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
									</svg>
									Prompts
								</a>
								<a href="/search" class="nav-link" data-active={Astro.url.pathname === '/search'}>
									<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
									</svg>
									Search
								</a>
								<a href="/mcp" class="nav-link" data-active={Astro.url.pathname === '/mcp'}>
									<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
									</svg>
									MCP Server
								</a>
							</div>
						</div>
						<div class="hidden sm:ml-6 sm:flex sm:items-center space-x-4">
							<div class="text-xs font-medium text-gray-300 bg-dark-800/50 px-3 py-1 rounded-full border border-dark-700/50">
								TypeScript Powered
							</div>
							<a href="/what-is-this" class="p-2 text-gray-400 hover:text-primary-400 rounded-lg hover:bg-dark-800/50 transition-all duration-200 group" title="What is this stuff? - Help & Info">
								<svg class="w-5 h-5 group-hover:scale-110 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
								</svg>
							</a>
						</div>

						<!-- Mobile menu button -->
						<div class="sm:hidden">
							<button type="button" class="mobile-menu-button p-2 rounded-md text-gray-400 hover:text-gray-300 hover:bg-dark-800/50 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all duration-200" aria-controls="mobile-menu" aria-expanded="false">
								<span class="sr-only">Open main menu</span>
								<svg class="block h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
								</svg>
							</button>
						</div>
					</div>
				</div>

				<!-- Mobile menu -->
				<div class="sm:hidden hidden" id="mobile-menu">
					<div class="glass pt-2 pb-3 space-y-1">
						<a href="/" class="mobile-nav-link" data-active={Astro.url.pathname === '/'}>
							<svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
							</svg>
							Dashboard
						</a>
						<a href="/prompts" class="mobile-nav-link" data-active={Astro.url.pathname.startsWith('/prompts')}>
							<svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
							</svg>
							Prompts
						</a>
						<a href="/search" class="mobile-nav-link" data-active={Astro.url.pathname === '/search'}>
							<svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
							</svg>
							Search
						</a>
						<a href="/mcp" class="mobile-nav-link" data-active={Astro.url.pathname === '/mcp'}>
							<svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
							</svg>
							MCP Server
						</a>
					</div>
				</div>
			</nav>

			<main class="py-8 sm:py-12 animate-fade-in flex-1">
				<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
					<slot />
				</div>
			</main>
			
			<!-- Footer -->
			<footer class="glass border-t border-dark-700/30 mt-16">
				<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12">
					<div class="grid grid-cols-1 md:grid-cols-4 gap-8">
						<!-- Brand Section -->
						<div class="md:col-span-2">
							<div class="flex items-center space-x-3 mb-4">
								<div class="w-8 h-8 bg-gradient-to-br from-primary-500 to-accent-500 rounded-lg flex items-center justify-center shadow-md">
									<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
									</svg>
								</div>
								<h3 class="text-lg font-bold bg-gradient-to-r from-gray-100 via-primary-300 to-accent-300 bg-clip-text text-transparent">Prompt Craft</h3>
							</div>
							<p class="text-gray-400 mb-6 max-w-md leading-relaxed">
								A powerful TypeScript-based prompt management system for organizing and managing your AI prompts with precision and style.
							</p>
							<div class="flex items-center space-x-4">
								<span class="text-xs font-medium text-gray-400 bg-dark-800/50 px-3 py-1 rounded-full border border-dark-700/50">
									Built with TypeScript & Astro
								</span>
							</div>
						</div>
						
						<!-- Links Section -->
						<div>
							<h4 class="text-sm font-semibold text-gray-200 mb-4 uppercase tracking-wide">Quick Links</h4>
							<ul class="space-y-3">
								<li>
									<a href="/what-is-this" class="text-gray-400 hover:text-accent-400 transition-colors duration-200 text-sm flex items-center">
										<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
										</svg>
										What is this?
									</a>
								</li>
								<li>
									<a href="/prompts/new" class="text-gray-400 hover:text-primary-400 transition-colors duration-200 text-sm">
										Create Prompt
									</a>
								</li>
								<li>
									<a href="/prompts" class="text-gray-400 hover:text-primary-400 transition-colors duration-200 text-sm">
										Browse Prompts
									</a>
								</li>
								<li>
									<a href="/search" class="text-gray-400 hover:text-primary-400 transition-colors duration-200 text-sm">
										Advanced Search
									</a>
								</li>
							</ul>
						</div>
						
						<!-- Creator Section -->
						<div>
							<h4 class="text-sm font-semibold text-gray-200 mb-4 uppercase tracking-wide">Creator</h4>
							<div class="space-y-4">
								<div class="flex items-center space-x-3">
									<div class="w-8 h-8 bg-gradient-to-br from-accent-500 to-primary-500 rounded-full flex items-center justify-center text-white font-bold text-sm">
										L
									</div>
									<div>
										<p class="text-gray-300 font-medium text-sm">Lukeus</p>
										<p class="text-gray-500 text-xs">Musician, Artist, Creator</p>
									</div>
								</div>
								
								<div class="flex flex-col space-y-2">
									<a 
										href="https://lukeus.com" 
										target="_blank" 
										rel="noopener noreferrer"
										class="flex items-center space-x-2 text-gray-400 hover:text-accent-400 transition-colors duration-200 text-sm group"
									>
										<svg class="w-4 h-4 group-hover:scale-110 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
										</svg>
										<span>lukeus.com</span>
										<svg class="w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
										</svg>
									</a>
									
									<a 
										href="https://lukeus.app" 
										target="_blank" 
										rel="noopener noreferrer"
										class="flex items-center space-x-2 text-gray-400 hover:text-primary-400 transition-colors duration-200 text-sm group"
									>
										<svg class="w-4 h-4 group-hover:scale-110 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
										</svg>
										<span>Music Lab</span>
										<svg class="w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
										</svg>
									</a>
								</div>
							</div>
						</div>
					</div>
					
					<!-- Bottom Section -->
					<div class="border-t border-dark-700/50 pt-8 mt-8">
						<div class="flex flex-col md:flex-row md:items-center justify-between">
							<div class="flex items-center space-x-6 mb-4 md:mb-0">
								<p class="text-gray-500 text-sm">
									© 2024 Lukeus. All rights reserved.
								</p>
								<div class="flex items-center space-x-4">
									<span class="text-gray-500 text-xs">
										"Dreams become reality through creation."
									</span>
								</div>
							</div>
							
							<div class="flex items-center space-x-3">
								<div class="flex items-center space-x-2 text-xs text-gray-500">
									<div class="w-2 h-2 bg-success-500 rounded-full animate-pulse"></div>
									<span>System Online</span>
								</div>
								<div class="text-xs text-gray-500">
									v1.0.0
								</div>
							</div>
						</div>
					</div>
				</div>
			</footer>
		</div>

		<!-- Enhanced Navigation Styles -->
		<style>
			.nav-link {
				@apply flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ease-in-out;
				@apply text-gray-300 hover:text-primary-300 hover:bg-dark-800/60 hover:shadow-sm;
			}

			.nav-link[data-active="true"] {
				@apply text-primary-300 bg-primary-900/30 shadow-sm ring-1 ring-primary-700/30;
			}

			.mobile-nav-link {
				@apply flex items-center px-4 py-3 text-base font-medium text-gray-200 hover:text-white hover:bg-dark-800/50 transition-all duration-200;
			}

			.mobile-nav-link[data-active="true"] {
				@apply text-white bg-primary-800/30;
			}

			/* Mobile menu animations */
			#mobile-menu {
				transition: all 0.3s ease-in-out;
				transform: translateY(-10px);
				opacity: 0;
			}

			#mobile-menu.show {
				transform: translateY(0);
				opacity: 1;
			}

			/* Global Button Styles */
			.btn-primary {
				@apply inline-flex items-center px-6 py-3 text-sm font-semibold rounded-lg;
				@apply bg-gradient-to-r from-primary-600 to-primary-700 text-white border border-primary-500/50;
				@apply hover:from-primary-700 hover:to-primary-800 hover:border-primary-400/50;
				@apply hover:shadow-lg hover:shadow-primary-500/25;
				@apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 focus:ring-offset-dark-900;
				@apply transition-all duration-200 transform hover:scale-105 active:scale-95;
			}

			.btn-secondary {
				@apply inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg;
				@apply bg-dark-800/60 text-gray-300 border border-dark-600/50;
				@apply hover:bg-dark-700/70 hover:text-gray-200 hover:border-dark-500/50 hover:shadow-md;
				@apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-dark-500 focus:ring-offset-dark-900;
				@apply transition-all duration-200;
			}

			/* Prompt Grid Styles */
			.prompts-grid {
				@apply grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6;
			}

			/* Category Pills */
			.category-work {
				@apply bg-blue-600/20 text-blue-300 border border-blue-500/30;
			}

			.category-personal {
				@apply bg-accent-600/20 text-accent-300 border border-accent-500/30;
			}

			.category-shared {
				@apply bg-success-600/20 text-success-300 border border-success-500/30;
			}

			/* Animations */
			@keyframes fade-in {
				from {
					opacity: 0;
				}
				to {
					opacity: 1;
				}
			}

			@keyframes slide-up {
				from {
					opacity: 0;
					transform: translateY(20px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			.animate-fade-in {
				animation: fade-in 0.6s ease-out;
			}

			.animate-slide-up {
				animation: slide-up 0.6s ease-out;
			}

			/* Utility Classes */
			.sr-only {
				position: absolute;
				width: 1px;
				height: 1px;
				padding: 0;
				margin: -1px;
				overflow: hidden;
				clip: rect(0, 0, 0, 0);
				white-space: nowrap;
				border: 0;
			}

			.line-clamp-2 {
				overflow: hidden;
				display: -webkit-box;
				-webkit-box-orient: vertical;
				-webkit-line-clamp: 2;
			}
		</style>

		<!-- Mobile Navigation Script -->
		<script>
			document.addEventListener('DOMContentLoaded', () => {
				const mobileMenuButton = document.querySelector('.mobile-menu-button');
				const mobileMenu = document.getElementById('mobile-menu');

				mobileMenuButton?.addEventListener('click', () => {
					const isOpen = !mobileMenu?.classList.contains('hidden');
					
					if (isOpen) {
						// Close menu
						mobileMenu?.classList.remove('show');
						setTimeout(() => {
							mobileMenu?.classList.add('hidden');
						}, 300);
						mobileMenuButton.setAttribute('aria-expanded', 'false');
					} else {
						// Open menu
						mobileMenu?.classList.remove('hidden');
						setTimeout(() => {
							mobileMenu?.classList.add('show');
						}, 10);
						mobileMenuButton.setAttribute('aria-expanded', 'true');
					}
				});

				// Close mobile menu when clicking outside
				document.addEventListener('click', (e) => {
					if (!mobileMenuButton?.contains(e.target as Node) && 
						!mobileMenu?.contains(e.target as Node)) {
						mobileMenu?.classList.remove('show');
						setTimeout(() => {
							mobileMenu?.classList.add('hidden');
						}, 300);
						mobileMenuButton?.setAttribute('aria-expanded', 'false');
					}
				});
			});
		</script>
	</body>
</html>
